((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};this.Mercury.Toolbar.Expander=function(a){function c(a,b){return this.name=a,this.options=b,this.container=this.options["for"],this.containerWidth=this.container.outerWidth(),c.__super__.constructor.call(this,null,this.name,this.options),this.element}return b(c,a),c.prototype.build=function(){var a;return this.container.css({whiteSpace:"normal"}),this.trigger=jQuery("<div>",{"class":"mercury-toolbar-expander"}).appendTo((a=jQuery(this.options.appendTo).get(0))!=null?a:"body"),this.element=jQuery("<div>",{"class":"mercury-palette mercury-expander mercury-"+this.name+"-expander",style:"display:none"}),this.windowResize()},c.prototype.bindEvents=function(){var a=this;return Mercury.on("hide:dialogs",function(b,c){if(c!==a)return a.hide()}),Mercury.on("resize",function(){return a.windowResize()}),c.__super__.bindEvents.apply(this,arguments),this.trigger.click(function(b){var c,d,e,f,g;b.stopPropagation(),d=[],g=a.container.find(".mercury-button");for(e=0,f=g.length;e<f;e++)c=g[e],c=jQuery(c),c.position().top>5&&d.push(c.data("expander"));return a.loadContent(d.join("")),a.toggle()}),this.element.click(function(b){var c,d;return d=jQuery(b.target).closest("[data-button]").data("button"),c=a.container.find(".mercury-"+d+"-button"),c.click()})},c.prototype.windowResize=function(){return this.containerWidth>jQuery(window).width()?this.trigger.show():this.trigger.hide(),this.hide()},c.prototype.position=function(a){var b,c;return this.element.css({top:0,left:0,display:"block",visibility:"hidden"}),b=this.trigger.offset(),c=this.element.width(),b.left+c>jQuery(window).width()&&(b.left=b.left-c+this.trigger.width()),this.element.css({top:b.top+this.trigger.height(),left:b.left,display:a?"block":"none",visibility:"visible"})},c}(Mercury.Palette)})).call(this);