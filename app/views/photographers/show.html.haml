.container
  .row.mt-2
    .span12
      .pull-left.mr-2
        =image_for(@photographer, "60x60#")
      %h2.big-title.nocase=title(@photographer)
      
-if @photographer.photos.present?
  =render("slideshows/slideshow", :slides => @photos || @photographer.photos)
  
.container
  .row
    .span6
      -if @photographer.bio.present?
        =simple_format(@photographer.bio)
      =favourite_link(@photographer)
    .span4.offset2.news_page_signup
      -if current_user.try(:admin?)
        %h2.normal-title.upcase.mb-1
          Attendance 
        %form
          %select{:onchange => "location = this.options[this.selectedIndex].value;"}
            -@photographer.profiles.each do |profile|
              %option{:value => profile.id, selected: profile.id == photographer.id}=profile.edition    
      -if !@photographer.galleries.where("view_name = 'gallery'").empty?
        %h2.normal-title.upcase.mb-1 Represented by
        .pull-left.clear.mb-2
          -@photographer.galleries.where("view_name = 'gallery'").each do |gallery|
            .row.mb-1
              .span1
                =link_to(image_for(gallery, "60x60#"), gallery)
              .span3
                =link_to_self(gallery)

      -if !@photographer.galleries.where("view_name != 'gallery'").empty?
        %h2.normal-title.upcase.mb-1 Related Stories
        .pull-left.clear.mb-2
          -@photographer.galleries.where("view_name != 'gallery'").each do |story|
            .row.mb-1
              .span1
                =link_to(image_for(story, "60x60#"), story)
              .span3
                =link_to_self(story)
      -if !@photographer.links.empty?
        %h2.normal-title.upcase.mb-1 Contact
        .mb-2
          =render('photographers/contact_list', :links => @photographer.links)

      -if !@photographer.user_tags.empty?
        %h2.normal-title.upcase.mb-1 Tags
        %ul.tag-list.tag-list-horizontal
          -@photographer.user_tags.each do |tag|
            %li
              =link_to_tag(tag, :label_options => {:method => :titleize})
  .row
    .span12
      =options_panel do
        =back_link
        =link_if_can("Edit photographer", [:edit, @photographer])
        =link_if_can("Delete photographer", [:destroy, @photographer], :confirm => "Are you sure - this will also delete all the photographer's photos?")
        -if !@photographer.has_latest_edition?
          =link_if_can("Create profile for #{User::LATEST_EDITION}", [:clone, @photographer], :confirm => "Are you sure you want to create a profile for #{User::LATEST_EDITION}?", :method => :post)
